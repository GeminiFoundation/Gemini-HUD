if upB==false and downB==false then if shift==true then local function a()local b=vec3(construct.getWorldPosition())local c=(DestinationCenter-DepartureCenter):normalize()local d=(b-DepartureCenter):dot(c)/c:dot(c)if d<=0.then return(b-DepartureCenter):len()elseif d>=(DestinationCenter-DepartureCenter):len()then return(b-DestinationCenter):len()end;local e=DepartureCenter+d*c;local f="::pos{0,0,"..math.floor(e.x)..","..math.floor(e.y)..","..math.floor(e.z).."}"return f end;system.print("Pipe center: "..DepartureCenterName.." - "..DestinationCenterName)system.setWaypoint(a())else local function a()local DestinationCenter=vec3(stellarObjects[sortestPipeKeyId].center)local DepartureCenter=vec3(stellarObjects[sortestPipeKey2Id].center)local b=vec3(construct.getWorldPosition())local c=(DestinationCenter-DepartureCenter):normalize()local d=(b-DepartureCenter):dot(c)/c:dot(c)if d<=0.then return(b-DepartureCenter):len()elseif d>=(DestinationCenter-DepartureCenter):len()then return(b-DestinationCenter):len()end;local e=DepartureCenter+d*c;local f="::pos{0,0,"..math.floor(e.x)..","..math.floor(e.y)..","..math.floor(e.z).."}"return f end;local g="Pipe center: "..stellarObjects[sortestPipeKeyId].name[1].." - "..stellarObjects[sortestPipeKey2Id].name[1]system.print(g)system.setWaypoint(a())end end;if upB==true and shield.getResistancesCooldown()==0 then local h=shield.getResistances()local i={0,0,0,resMAX}if h[1]~=i[1]or h[2]~=i[2]or h[3]~=i[3]or h[4]~=i[4]then if shield.setResistances(0,0,0,resMAX)==1 then system.print("THERMIC POWER 100%")actionRes(i)system.playSound('shieldNewResists.mp3')else system.print("ERR6")system.playSound('shieldResistError.mp3')end else system.print("ERR7")system.playSound('shieldResistError.mp3')end end;if downB==true and shield.getResistancesCooldown()==0 then local h=shield.getResistances()local i={0,resMAX/2,0,resMAX/2}if h[1]~=i[1]or h[2]~=i[2]or h[3]~=i[3]or h[4]~=i[4]then if shield.setResistances(0,resMAX/2,0,resMAX/2)==1 then system.print("LASER PROFILE 50/50%")actionRes(i)system.playSound('shieldNewResists.mp3')else system.print("ERR6")system.playSound('shieldResistError.mp3')end else system.print("ERR7")system.playSound('shieldResistError.mp3')end end